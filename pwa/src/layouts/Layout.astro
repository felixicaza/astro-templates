---
import type { Layout } from '@types'

import { Head } from 'astro-capo'

import SchemaGlobal from '@components/schema/Global.astro'
import SplashScreens from '@components/SplashScreens.astro'

import { pwaInfo } from 'virtual:pwa-info'

import { AUTHOR } from '@data/constants'

import '@unocss/reset/tailwind.css'
import '@styles/index.css'

interface Props {
  layout: Layout
}

const { layout } = Astro.props as Props
const { title, description, metaRobots } = layout
---

<!doctype html>
<html dir="ltr" lang="en">
  <Head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>

    <meta name="robots" content={metaRobots || 'index, follow'} />
    {description && <meta name="description" content={description} />}
    {description && <link href={Astro.url.href} rel="canonical" />}
    <meta name="author" content={AUTHOR} />
    {description && <SchemaGlobal />}

    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    <meta name="color-scheme" content="dark light" />
    <meta name="theme-color" content="#000" />
    <meta name="msapplication-TileColor" content="#000" />
    {pwaInfo && <Fragment set:html={pwaInfo.webManifest.linkTag} />}

    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="apple-mobile-web-app-title" content="Web App" />
    <meta name="application-name" content="Web App" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />

    <SplashScreens />

    <slot name="head" />
  </Head>
  <body>
    <slot />

    <script>
      import '@scripts/pwa'
    </script>

    <slot name="body" />
  </body>
</html>
